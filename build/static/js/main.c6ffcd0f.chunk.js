(this.webpackJsonppersons=this.webpackJsonppersons||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(15),s=t.n(r),o=t(3),c=t(2),a=t(4),u=t.n(a),i="/api/persons",l=function(e){return u.a.post(i,e).then((function(e){return e.data}))},b=function(e,n){return u.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},j=function(){return u.a.get(i).then((function(e){return e.data}))},m=function(e){return u.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},f=t(0),d=function(e){var n=e.newName,t=e.newNumber,r=e.persons,s=e.setNewName,o=e.setNewNumber,c=e.setPersons,a=(e.message,e.setMessage);return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();for(var u={name:n,number:t,id:r.length+1},i=!1,j=!1,m=0;m<r.length;m++)r[m].name.toLowerCase()===n.toLowerCase()&&(i=!0),r[m].number.toLowerCase()===t.toLowerCase()&&(j=!0);if(i){if(s(""),o(""),!j&&window.confirm("".concat(n," is already added to persons, replace the old number with a new one?"))){var f=r.filter((function(e){return e.name.toLowerCase()===n.toLowerCase()?e:""}));b(f[0].id,{name:f[0].name,number:t,id:f[0].id}).then((function(e){var n=r.filter((function(n){return n.name===e.name?n.number=e.number:n.number}));c(n)})).catch((function(e){console.log("This user is already deleted."),a("Information of ".concat(f[0].name," has already been removed from server."))}))}}else console.log(u),l(u).then((function(e){c(r.concat(u)),s(""),o(""),a("".concat(u.name," is added")),setTimeout((function(){return a(null)}),3e3)})).catch((function(e){console.log("fail")}))},children:["name:",Object(f.jsx)("input",{type:"text",value:n,onChange:function(e){s(e.target.value)}}),Object(f.jsx)("br",{}),"number:",Object(f.jsx)("input",{type:"text",value:t,onChange:function(e){o(e.target.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",children:"Add"})]})},h=function(e){var n=e.persons,t=e.setPersons;return Object(f.jsxs)("form",{onSubmit:function(e){window.confirm("Delete ".concat(n.name," ?"))&&m(n.id).then((function(e){console.log(e),t(e)}))},children:[n.name," ",n.number,Object(f.jsx)("button",{className:"deleteButton",type:"submit",children:"Delete"})]})},O=function(e){var n=e.persons,t=e.setPersons;return Object(f.jsx)("div",{children:n.map((function(e){return Object(f.jsx)(h,{persons:e,setPersons:t},e.name)}))})},p=function(e){var n=e.persons,t=Object(c.useState)(n),r=Object(o.a)(t,2),s=r[0],a=r[1];return Object(f.jsxs)("div",{children:["Filter shown with:",Object(f.jsx)("input",{type:"text",onChange:function(e){e.preventDefault();var t=e.target.value;t=t.toLowerCase();var r;r=n.filter((function(e){return""!==t?-1!==e.name.toLowerCase().search(t):null})),a(r),console.log("result length",r.length)}}),s.map((function(e,n){return Object(f.jsxs)("li",{children:[e.name," - ",e.number]},e.id)}))]})},w=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{className:"notifMessage",children:n})},x=(t(40),function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],s=Object(c.useState)(""),a=Object(o.a)(s,2),u=a[0],i=a[1],l=Object(c.useState)(""),b=Object(o.a)(l,2),m=b[0],h=b[1],x=Object(c.useState)(null),v=Object(o.a)(x,2),g=v[0],N=v[1];return Object(c.useEffect)((function(){j().then((function(e){r(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Persons"}),Object(f.jsx)(w,{message:g}),Object(f.jsx)(p,{persons:t}),Object(f.jsx)("h2",{children:"Add a new contact"}),Object(f.jsx)(d,{newName:u,newNumber:m,persons:t,setNewName:i,setNewNumber:h,setPersons:r,message:g,setMessage:N}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(O,{persons:t,setPersons:r})]})});s.a.render(Object(f.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.c6ffcd0f.chunk.js.map